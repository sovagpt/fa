<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Molly | AI Betting Advisor</title>
    <link rel="icon" type="image/png" href="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68e3e486ad84ad7e7c12c57e_New%20Project%20(30).png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: 
                radial-gradient(1200px 600px at 10% 10%, rgba(37, 99, 235, 0.18), transparent 40%),
                radial-gradient(900px 500px at 80% 20%, rgba(0, 212, 255, 0.16), transparent 45%),
                radial-gradient(800px 600px at 40% 85%, rgba(155, 89, 182, 0.14), transparent 45%),
                linear-gradient(135deg, #090d19 0%, #0b0f1f 50%, #0a0d18 100%);
            background-size: 200% 200%;
            animation: bgShift 48s ease-in-out infinite alternate;
            min-height: 100vh;
            color: #ffffff;
            display: flex;
            flex-direction: column;
        }

        .threeD-panel { 
    position: fixed; 
    left: 16px; 
    bottom: 16px; 
    width: 380px; 
    height: 315px; 
    border-radius: 16px; 
    background: rgba(16,18,28,0.5); 
    border: 1px solid rgba(255,255,255,0.12); 
    backdrop-filter: blur(14px); 
    -webkit-backdrop-filter: blur(14px); 
    box-shadow: 0 8px 24px rgba(0,0,0,0.35); 
    z-index: 900; 
    display: flex; 
    overflow: hidden; 
    padding: 8px;
}

.threeD-header { 
    display: flex; 
    align-items: center; 
    justify-content: space-between; 
    padding: 12px 16px; 
    border-bottom: 1px solid rgba(255,255,255,0.12); 
    color: #e5e5e5; 
    font-weight: 700; 
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(29, 78, 216, 0.05));
    position: relative;
}

.threeD-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, #2563eb, #1d4ed8, #7c3aed);
}

.panel-close { 
    background: rgba(255,255,255,0.05); 
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    color: #94a3b8; 
    font-size: 14px; 
    cursor: pointer; 
    padding: 4px 8px;
    transition: all 0.3s ease;
}

.panel-close:hover {
    background: rgba(239, 68, 68, 0.1);
    border-color: rgba(239, 68, 68, 0.3);
    color: #f87171;
}

.threeD-body { 
    flex: 1; 
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 0;
}

.character-gif {
    width: 100%;
    height: 100%;
    border-radius: 12px;
    object-fit: cover;
    border: 2px solid rgba(37, 99, 235, 0.3);
    box-shadow: 0 8px 20px rgba(37, 99, 235, 0.2);
}

.character-gif:hover {
    transform: scale(1.05);
    border-color: rgba(37, 99, 235, 0.5);
    box-shadow: 0 12px 25px rgba(37, 99, 235, 0.3);
}

        /* Enhanced background glow */
        body::before,
        body::after { 
            content: ""; 
            position: fixed; 
            z-index: -1; 
            width: 60vmax; 
            height: 60vmax; 
            filter: blur(70px); 
            opacity: 0.35; 
            transform: translateZ(0); 
            pointer-events: none; 
        }

        body::before { 
            top: -20vmax; 
            left: -10vmax; 
            background: radial-gradient(circle at center, rgba(37, 99, 235, 0.45), rgba(29, 78, 216, 0.25), transparent 60%); 
            animation: floatA 26s ease-in-out infinite; 
        }

        body::after { 
            bottom: -25vmax; 
            right: -15vmax; 
            background: radial-gradient(circle at center, rgba(0, 212, 255, 0.35), rgba(155, 89, 182, 0.25), transparent 60%); 
            animation: floatB 34s ease-in-out infinite; 
        }

        @keyframes floatA { 
            0%, 100% { transform: translate(0,0) scale(1);} 
            50% { transform: translate(3vmax,2vmax) scale(1.05);} 
        }

        @keyframes floatB { 
            0%, 100% { transform: translate(0,0) scale(1);} 
            50% { transform: translate(-3vmax,-2vmax) scale(1.05);} 
        }

        @keyframes bgShift { 
            0% { background-position: 0% 0%, 100% 0%, 0% 100%, 0% 0%; } 
            100% { background-position: 50% 50%, 50% 50%, 50% 50%, 100% 100%; } 
        }

        /* Main content container */
        .main-content {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .top-right-icons { 
            position: fixed; 
            top: 18px; 
            right: 20px; 
            display: flex; 
            gap: 10px; 
            z-index: 1000; 
        }

        .icon-btn { 
            width: 44px; 
            height: 44px; 
            display: inline-flex; 
            align-items: center; 
            justify-content: center; 
            border-radius: 12px; 
            background: rgba(255,255,255,0.06); 
            border: 1px solid rgba(255,255,255,0.18); 
            backdrop-filter: blur(10px); 
            -webkit-backdrop-filter: blur(10px); 
            box-shadow: 0 6px 18px rgba(0,0,0,0.35); 
            transition: transform 0.25s ease, background 0.25s ease, box-shadow 0.25s ease; 
            text-decoration: none;
            color: white;
        }

        .icon-btn:hover { 
            transform: translateY(-2px); 
            background: rgba(255,255,255,0.10); 
            box-shadow: 0 10px 24px rgba(0,0,0,0.45); 
        }

        .icon-btn img { 
            width: 22px; 
            height: 22px; 
            object-fit: contain; 
            display: block; 
        }

        .about-btn { 
            height: 44px; 
            padding: 0 14px; 
            border-radius: 12px; 
            border: 1px solid rgba(255,255,255,0.18); 
            background: rgba(255,255,255,0.06); 
            color: #fff; 
            font-weight: 600; 
            letter-spacing: .2px; 
            backdrop-filter: blur(10px); 
            -webkit-backdrop-filter: blur(10px); 
            cursor: pointer; 
            transition: transform .2s ease, background .2s ease; 
        }

        .about-btn:hover { 
            transform: translateY(-2px); 
            background: rgba(255,255,255,0.10); 
        }

        .chat-container {
            width: 100%;
            max-width: 1000px;
            height: 90vh;
            background: rgba(16, 18, 28, 0.38);
            backdrop-filter: blur(22px) saturate(120%);
            -webkit-backdrop-filter: blur(22px) saturate(120%);
            border: 1px solid rgba(255,255,255,0.12);
            box-shadow: 0 25px 50px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06);
            border-radius: 24px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        .chat-container::before { 
            content: ""; 
            position: absolute; 
            inset: 0; 
            border-radius: inherit; 
            padding: 1px; 
            background: linear-gradient(135deg, rgba(255,255,255,0.18), rgba(255,255,255,0.04)); 
            -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); 
            -webkit-mask-composite: xor; 
            mask-composite: exclude; 
            pointer-events: none; 
        }

        .chat-header {
            background: transparent;
            color: white;
            padding: 24px;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }

        .chat-header h1 {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #ffffff, #a0a0a0);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .chat-header p {
            opacity: 0.8;
            font-size: 1rem;
            font-weight: 400;
            color: #b0b0b0;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            background: rgba(0, 0, 0, 0.4);
        }

        .message {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            animation: fadeIn 0.6s ease;
            max-width: 100%;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            color: white;
            font-size: 0.8rem;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .avatar-user {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
        }

        .avatar-bot {
            background: linear-gradient(135deg, #000000, #374151);
        }

        .avatar-bot img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .message-content {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            padding: 20px 24px;
            border-radius: 16px;
            max-width: 75%;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            line-height: 1.6;
            color: #ffffff;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .welcome-message {
            text-align: center;
            padding: 40px 20px;
            color: #b0b0b0;
        }

        .welcome-message h2 {
            color: #ffffff;
            margin-bottom: 16px;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .welcome-message p {
            font-size: 1.05rem;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #9ca3af;
        }

        .example-questions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-top: 30px;
        }

        .example-question {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 18px 22px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            color: #e5e5e5;
            font-weight: 500;
            text-align: left;
            backdrop-filter: blur(5px);
        }

        .example-question:hover {
            background: rgba(37, 99, 235, 0.1);
            border-color: rgba(37, 99, 235, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: fit-content;
            margin-bottom: 20px;
            color: #b0b0b0;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #2563eb;
            animation: typing 1.5s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { opacity: 0.3; transform: scale(0.8); }
            30% { opacity: 1; transform: scale(1); }
        }

        .chat-input-container {
            padding: 24px;
            background: rgba(0, 0, 0, 0.6);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .chat-input {
            display: flex;
            gap: 16px;
            align-items: flex-end;
            width: 100%;
        }

        .input-field {
            flex: 1;
            min-width: 0;
            padding: 16px 24px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            color: #ffffff;
            font-size: 1rem;
            resize: none;
            max-height: 120px;
            min-height: 56px;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .input-field::placeholder {
            color: #9ca3af;
        }

        .input-field:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
            background: rgba(255, 255, 255, 0.12);
        }

        .send-button {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            color: white;
            border: none;
            padding: 0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 20px rgba(37, 99, 235, 0.3);
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .send-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(37, 99, 235, 0.4);
            background: linear-gradient(135deg, #1d4ed8, #1e40af);
        }

        .send-button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* Footer */
        .site-footer {
            margin-top: auto;
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.9));
            border-top: 1px solid rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 32px 0 24px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .footer-main {
    display: grid;
    grid-template-columns: 1fr;
    gap: 48px;
    margin-bottom: 32px;
    justify-items: center;
}

        .footer-brand {
    display: flex;
    flex-direction: column;
    gap: 16px;
    align-items: center;
    text-align: center;
}

.footer-description {
    color: #94a3b8;
    font-size: 0.95rem;
    line-height: 1.6;
    max-width: 500px;
}

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .footer-logo-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            color: white;
            font-size: 18px;
        }

        .footer-logo-text {
            font-size: 1.25rem;
            font-weight: 800;
            background: linear-gradient(135deg, #ffffff, #94a3b8);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .footer-social {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .footer-social-link {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .footer-social-link:hover {
            background: rgba(37, 99, 235, 0.1);
            border-color: rgba(37, 99, 235, 0.3);
            transform: translateY(-2px);
        }

        .footer-social-link img {
            width: 20px;
            height: 20px;
        }

        .footer-column {
            display: flex;
            flex-direction: column;
        }

        .footer-column h4 {
            color: #ffffff;
            font-size: 0.95rem;
            font-weight: 700;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .footer-links {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .footer-link {
            color: #94a3b8;
            font-size: 0.9rem;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-link:hover {
            color: #ffffff;
        }

        .footer-bottom {
            padding-top: 24px;
            border-top: 1px solid rgba(255, 255, 255, 0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .footer-copyright {
            color: #64748b;
            font-size: 0.85rem;
        }

        .markets-section {
    margin-top: 24px;
}

.markets-header {
    font-size: 1.1rem;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    display: flex;
    align-items: center;
    gap: 8px;
}

        .market-image {
    width: 60px;
    height: 60px;
    border-radius: 8px;
    object-fit: cover;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    flex-shrink: 0;
}

.market-card {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 16px;
    padding: 20px;
    margin: 16px 0;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    transition: all 0.4s ease;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
}

.market-card:hover {
    border-color: rgba(37, 99, 235, 0.5);
    box-shadow: 0 12px 35px rgba(37, 99, 235, 0.2);
    transform: translateY(-2px);
}

.market-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, #2563eb, #1d4ed8, #1e40af);
}

.market-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 18px;
}

.market-title {
    font-weight: 700;
    color: #ffffff;
    font-size: 1.05rem;
    line-height: 1.4;
    flex: 1;
    padding-right: 16px;
}

.market-outcomes {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
    margin: 18px 0;
}

.outcome {
    padding: 14px 18px;
    border-radius: 12px;
    text-align: center;
    font-size: 0.95rem;
    font-weight: 700;
    transition: all 0.3s ease;
    border: 1px solid transparent;
    position: relative;
    overflow: hidden;
}

.outcome:hover {
    transform: scale(1.03);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
}

.outcome.favored {
    background: linear-gradient(135deg, #059669, #047857);
    color: white;
    border-color: rgba(5, 150, 105, 0.3);
}

.outcome.underdog {
    background: linear-gradient(135deg, #dc2626, #b91c1c);
    color: white;
    border-color: rgba(220, 38, 38, 0.3);
}

.outcome.neutral {
    background: linear-gradient(135deg, #6b7280, #4b5563);
    color: white;
    border-color: rgba(107, 114, 128, 0.3);
}

.market-stats {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 12px;
    margin-top: 18px;
    padding-top: 16px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.stat-item {
    text-align: center;
    padding: 8px;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.03);
}

.stat-label {
    display: block;
    margin-bottom: 4px;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #9ca3af;
    font-weight: 600;
}

.stat-value {
    font-weight: 800;
    color: #ffffff;
    font-size: 0.95rem;
}

        .footer-legal {
            display: flex;
            gap: 24px;
        }

        .footer-legal-link {
            color: #64748b;
            font-size: 0.85rem;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-legal-link:hover {
            color: #94a3b8;
        }

        /* Enhanced About Modal */
        .modal-overlay { 
            position: fixed; 
            inset: 0; 
            background: rgba(0,0,0,0.75); 
            backdrop-filter: blur(8px); 
            -webkit-backdrop-filter: blur(8px); 
            display: none; 
            align-items: center; 
            justify-content: center; 
            z-index: 1000;
            padding: 20px;
        }

        .about-modal { 
            position: relative; 
            width: min(900px, 95vw); 
            max-height: 90vh;
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.9));
            border: 1px solid rgba(255,255,255,0.15); 
            border-radius: 24px; 
            box-shadow: 0 25px 50px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.1); 
            overflow: hidden;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .modal-header {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(29, 78, 216, 0.05));
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding: 32px;
            position: relative;
        }

        .modal-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #2563eb, #1d4ed8, #7c3aed);
        }

        .modal-close { 
            position: absolute; 
            top: 20px; 
            right: 24px; 
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.05); 
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            color: #94a3b8; 
            font-size: 20px; 
            cursor: pointer; 
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: rgba(239, 68, 68, 0.1);
            border-color: rgba(239, 68, 68, 0.3);
            color: #f87171;
            transform: scale(1.05);
        }

        .about-hero {
            display: flex;
            align-items: center;
            gap: 24px;
            margin-bottom: 24px;
        }

        .about-avatar {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #2563eb, #7c3aed);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: 800;
            color: white;
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
        }

        .about-hero-content h2 {
            font-size: 2rem;
            font-weight: 800;
            margin: 0 0 8px 0;
            background: linear-gradient(135deg, #ffffff, #94a3b8);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .about-subtitle {
            color: #64748b;
            font-size: 1.1rem;
            margin-bottom: 16px;
        }

        .about-badges {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .badge {
            padding: 8px 16px;
            border-radius: 20px;
            background: rgba(37,99,235,0.15);
            border: 1px solid rgba(37,99,235,0.3);
            color: #93c5fd;
            font-weight: 700;
            font-size: 0.85rem;
            backdrop-filter: blur(10px);
        }

        .modal-body {
            padding: 0 32px 32px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .about-section {
            margin-bottom: 32px;
        }

        .about-section h3 {
            color: #ffffff;
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-icon {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
        }

        .about-description {
            color: #cbd5e1;
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 20px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .feature-item {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .feature-item:hover {
            background: rgba(37, 99, 235, 0.05);
            border-color: rgba(37, 99, 235, 0.2);
            transform: translateY(-2px);
        }

        .feature-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
            font-size: 18px;
            color: white;
        }

        .feature-item h4 {
            color: #ffffff;
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .feature-item p {
            color: #94a3b8;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 24px 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(29, 78, 216, 0.05));
            border-color: rgba(37, 99, 235, 0.3);
            transform: translateY(-2px);
        }

        .stat-value {
            font-size: 1.75rem;
            font-weight: 800;
            color: #ffffff;
            margin-bottom: 4px;
        }

        .stat-label {
            color: #64748b;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .cta-section {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(29, 78, 216, 0.05));
            border: 1px solid rgba(37, 99, 235, 0.2);
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            margin-top: 24px;
        }

        .cta-title {
            color: #ffffff;
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .cta-description {
            color: #94a3b8;
            margin-bottom: 20px;
        }

        .cta-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .cta-button {
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 700;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .cta-button.primary {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            color: white;
            border: none;
        }

        .cta-button.primary:hover {
            background: linear-gradient(135deg, #1d4ed8, #1e40af);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
        }

        .cta-button.secondary {
            background: transparent;
            color: #94a3b8;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .cta-button.secondary:hover {
            background: rgba(255,255,255,0.05);
            color: #ffffff;
            border-color: rgba(255,255,255,0.3);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Scrollbar Styling */
        .chat-messages::-webkit-scrollbar,
        .modal-body::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track,
        .modal-body::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb,
        .modal-body::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover,
        .modal-body::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 10px;
            }
            
            .chat-container {
                height: 95vh;
                max-width: none;
                border-radius: 16px;
            }
            
            .message-content {
                max-width: 85%;
            }

            .example-questions {
                grid-template-columns: 1fr;
            }

            .chat-input {
                flex-direction: column;
                gap: 12px;
            }

            .send-button {
                width: 100%;
                height: 48px;
                border-radius: 12px;
            }

            .site-footer {
                margin: 16px 10px 8px;
                padding: 24px 16px;
            }

            .footer-main {
                grid-template-columns: 1fr;
                gap: 32px;
                text-align: center;
            }

            .footer-brand {
                align-items: center;
            }

            .footer-description {
                max-width: none;
            }

            .footer-bottom {
                flex-direction: column;
                text-align: center;
            }

            .footer-legal {
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <!-- Top-right social buttons -->
    <div class="top-right-icons">
    <a class="icon-btn" href="https://twitter.com/" target="_blank" rel="noopener" aria-label="Twitter">
        <img src="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68a663251731174a3dc255f1_689178ebf786d570b0c29520_tw%20(1).png" alt="Twitter" />
    </a>
    <a class="icon-btn" href="https://polymarket.com" target="_blank" rel="noopener" aria-label="Polymarket">
        <img src="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68c43c9ba4355c1b5e0d63da_68a663251731174a3dc255f1_689178ebf786d570b0c29520_tw%20(1)%20(1).png" alt="Polymarket" />
    </a>
    <a class="icon-btn" href="https://four.meme" target="_blank" rel="noopener" aria-label="Pump.fun">
        <img src="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68eb1cca21b1225f390f5192_apple-touch-icon.png" alt="Pump.fun" />
    </a>
    <button class="about-btn" id="docsBtn" type="button">Docs</button>
</div>
    
    <!-- Main content area -->
    <div class="main-content">
        <div class="chat-container">
            <div class="chat-header">
                <h1>Molly: Polymarket AI Advisor</h1>
                <p>CA:</p>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="welcome-message">
                    <h2>Welcome to Your AI Betting Advisor</h2>
                    <p>Ask me about any betting markets and I'll provide data-driven analysis and predictions to help guide your decisions.</p>
                    <div class="example-questions">
                        <div class="example-question" onclick="askQuestion('Who will win the Premier League this season?')">
                            Premier League winner predictions
                        </div>
                        <div class="example-question" onclick="askQuestion('What are the Fed interest rate predictions?')">
                            Federal Reserve rate predictions
                        </div>
                        <div class="example-question" onclick="askQuestion('Show me the highest volume markets')">
                            Highest volume betting markets
                        </div>
                        <div class="example-question" onclick="askQuestion('What NFL games should I bet on?')">
                            NFL betting recommendations
                        </div>
                    </div>
                </div>
            </div>

            <div class="typing-indicator" id="typingIndicator">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <span>AI is analyzing markets...</span>
            </div>

            <div class="chat-input-container">
                <div class="chat-input">
                    <textarea 
                        class="input-field" 
                        id="messageInput" 
                        placeholder="Ask me about any betting opportunity..."
                        rows="1"
                    ></textarea>
                    <button class="send-button" id="sendButton" onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-main">
                <div class="footer-brand">
                    <div class="footer-logo">
                        <div class="footer-logo-icon">
    <img src="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68e3e486ad84ad7e7c12c57e_New%20Project%20(30).png" alt="Molly Logo" style="width: 100%; height: 100%; object-fit: contain;">
</div>
                        <div class="footer-logo-text">Molly</div>
                    </div>
                    <p class="footer-description">
                        Advanced AI-powered prediction market analysis and autonomous trading platform. 
                        Combining deep learning with market intelligence for superior betting insights.
                    </p>
                    <div class="footer-social">
    <a href="https://twitter.com/Mollydotfun" class="footer-social-link" target="_blank" rel="noopener">
        <img src="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68a663251731174a3dc255f1_689178ebf786d570b0c29520_tw%20(1).png" alt="Twitter" />
    </a>
    <a href="https://polymarket.com" class="footer-social-link" target="_blank" rel="noopener">
        <img src="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68c43c9ba4355c1b5e0d63da_68a663251731174a3dc255f1_689178ebf786d570b0c29520_tw%20(1)%20(1).png" alt="Polymarket" />
    </a>
    <a href="https://pump.fun/coin/C1DjGsVBuD8Qi8xgyvqxQU6uWJKsKiuFXmxE24d8pump" class="footer-social-link" target="_blank" rel="noopener">
        <img src="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68eb1cca21b1225f390f5192_apple-touch-icon.png" alt="Pump.fun" />
    </a>
</div>
                </div>
                
                <div class="footer-column">
                    <h4>Platform</h4>
                    <div class="footer-links">
                        <a href="https://polymarket.com/" class="footer-link">Live Markets</a>
                        <a href="https://x.com/Mollydotfun" class="footer-link">Trading Bot</a>
                        <a href="https://polymarket.com/" class="footer-link">Analytics</a>
                        <a href="https://docs.polymarket.com/" class="footer-link">API Access</a>
                    </div>
                </div>
            
            <div class="footer-bottom">
                <div class="footer-copyright">
                    ¬© 2024 Molly. All rights reserved. Built for the future of prediction markets.
                </div>
            </div>
        </div>
    </footer>

    <!-- About Modal -->
    <div class="modal-overlay" id="aboutModal" style="display:none;">
        <div class="about-modal">
            <div class="modal-header">
                <button class="modal-close" id="aboutClose" type="button">√ó</button>
                <div class="about-hero">
                    <div class="about-avatar">P</div>
                    <div class="about-hero-content">
                        <h2>Molly</h2>
                        <p class="about-subtitle">AI Market Analyst & Autonomous Trading Platform</p>
                        <div class="about-badges">
                            <span class="badge">ü§ñ AI-Powered</span>
                            <span class="badge">üìä Market Expert</span>
                            <span class="badge">‚ö° Real-time</span>
                            <span class="badge">üöÄ Autonomous</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-body">
                <div class="about-section">
                    <h3>
                        <div class="section-icon">üéØ</div>
                        What is Molly?
                    </h3>
                    <p class="about-description">
                        Molly is a cutting-edge AI trading assistant designed specifically for prediction markets. 
                        We combine advanced machine learning algorithms with real-time market data to identify 
                        high-conviction betting opportunities and provide transparent, data-driven analysis.
                    </p>
                </div>

                <div class="about-section">
                    <h3>
                        <div class="section-icon">‚öôÔ∏è</div>
                        Core Features
                    </h3>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <div class="feature-icon">üß†</div>
                            <h4>AI Market Analysis</h4>
                            <p>Advanced algorithms analyze market depth, liquidity, momentum and sentiment across hundreds of markets</p>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üìà</div>
                            <h4>Smart Portfolio Management</h4>
                            <p>Kelly-criterion sizing, risk caps, and disciplined stop-loss logic to protect your capital</p>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üíé</div>
                            <h4>High-Conviction Signals</h4>
                            <p>Only surfaces opportunities with clear thesis, multiple confirming factors, and asymmetric risk/reward</p>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üìä</div>
                            <h4>Transparent Analysis</h4>
                            <p>Every recommendation includes detailed reasoning, market scenarios, and risk assessment</p>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">‚ö°</div>
                            <h4>Real-time Monitoring</h4>
                            <p>24/7 market surveillance with instant alerts for emerging opportunities and risk events</p>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üéØ</div>
                            <h4>Autonomous Trading</h4>
                            <p>Coming soon: Full automated trading with transparent performance tracking and live streaming</p>
                        </div>
                    </div>
                </div>

                <div class="about-section">
                    <h3>
                        <div class="section-icon">üìä</div>
                        Performance & Stats
                    </h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value">500+</div>
                            <div class="stat-label">Markets Analyzed</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">24/7</div>
                            <div class="stat-label">Market Monitoring</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">98%</div>
                            <div class="stat-label">Uptime Reliability</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">LLM</div>
                            <div class="stat-label">AI Engine</div>
                        </div>
                    </div>
                </div>

                <div class="about-section">
                    <h3>
                        <div class="section-icon">üöÄ</div>
                        Roadmap & Vision
                    </h3>
                    <p class="about-description">
                        Molly aims to become the premier autonomous trading platform for prediction markets. 
                        Our roadmap includes live trade streaming on pump.fun, transparent performance tracking, 
                        and the goal of becoming the top-performing trader on Polymarket through disciplined, 
                        data-driven strategies.
                    </p>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <div class="feature-icon">üé•</div>
                            <h4>Live Streaming</h4>
                            <p>All trades will be streamed live for full transparency</p>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üí∞</div>
                            <h4>Revenue Model</h4>
                            <p>10% creator rewards, 90% reinvested into $Molly token</p>
                        </div>
                    </div>
                </div>

                <div class="cta-section">
                    <h3 class="cta-title">Ready to Start Trading Smarter?</h3>
                    <p class="cta-description">
                        Join thousands of traders using AI-powered insights to maximize their prediction market returns
                    </p>
                    <div class="cta-buttons">
                        <a href="#" class="cta-button primary">
                            Get Started
                        </a>
                        <a href="#" class="cta-button secondary">
                            View Documentation
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const CONFIG = {
            POLYMARKET_DATA_URL: 'https://raw.githubusercontent.com/sovagpt/fa/main/polymarket_markets_full.json',
            OPENROUTER_API_URL: 'https://openrouter.ai/api/v1/chat/completions',
            MODEL: 'anthropic/claude-3.5-sonnet:beta'
        };

        // Global variables
        let polymarketData = null;
        let chatHistory = [];
        let isLoading = false;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        async function initializeApp() {
            try {
                await loadPolymarketData();
                setupEventListeners();
            } catch (error) {
                console.error('Failed to initialize app:', error);
            }
        }

        async function loadPolymarketData() {
            try {
                const response = await fetch(CONFIG.POLYMARKET_DATA_URL);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                polymarketData = await response.json();
                console.log(`Loaded ${polymarketData.markets?.length || 0} markets`);
                
            } catch (error) {
                console.error('Error loading Polymarket data:', error);
                throw error;
            }
        }

        function setupEventListeners() {
    const messageInput = document.getElementById('messageInput');
    const sendButton = document.getElementById('sendButton');

    messageInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            sendMessage();
        }
    });

    messageInput.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = Math.min(this.scrollHeight, 120) + 'px';
    });

    sendButton.addEventListener('click', sendMessage);
    
    // About modal handlers
    const aboutBtn = document.getElementById('aboutBtn');
    const aboutModal = document.getElementById('aboutModal');
    const aboutClose = document.getElementById('aboutClose');
    
    if (aboutBtn && aboutModal) {
        aboutBtn.addEventListener('click', () => { 
            aboutModal.style.display = 'flex'; 
        });
        
        if (aboutClose) {
            aboutClose.addEventListener('click', () => { 
                aboutModal.style.display = 'none'; 
            });
        }

        aboutModal.addEventListener('click', (e) => { 
            if (e.target === aboutModal) {
                aboutModal.style.display = 'none'; 
            }
        });
    }

    // Docs button handler
    const docsBtn = document.getElementById('docsBtn');
    if (docsBtn) {
        docsBtn.addEventListener('click', () => {
            window.open('./docs', '_blank');
        });
    }
}
        function askQuestion(question) {
            const messageInput = document.getElementById('messageInput');
            messageInput.value = question;
            sendMessage();
        }

        async function sendMessage() {
            if (isLoading) return;
            
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            if (!polymarketData) {
                alert('Market data is still loading. Please wait a moment and try again.');
                return;
            }

            const welcomeMsg = document.querySelector('.welcome-message');
            if (welcomeMsg) {
                welcomeMsg.remove();
            }

            input.value = '';
            input.style.height = 'auto';
            
            addMessage('user', message);
            showTypingIndicator();
            
            try {
                isLoading = true;
                const relevantMarkets = await findRelevantMarketsWithAI(message);
                const response = await getAIResponse(message, relevantMarkets);
                hideTypingIndicator();
                addMessage('bot', response, relevantMarkets);
            } catch (error) {
                console.error('Error getting AI response:', error);
                hideTypingIndicator();
                addMessage('bot', 'I encountered an error while processing your request. Please try again.');
            } finally {
                isLoading = false;
            }
        }

        async function getAIResponse(userMessage, relevantMarkets) {
            const context = createAIContext(userMessage, relevantMarkets);
            const aiResponse = await callOpenRouterAPI(context);
            return formatAIResponse(aiResponse);
        }

        function formatAIResponse(response) {
            let formattedResponse = response;
            
            formattedResponse = formattedResponse
                .replace(/\n\n/g, '</p><p>')
                .replace(/\n/g, '<br>');
            
            if (!formattedResponse.startsWith('<')) {
                formattedResponse = '<p>' + formattedResponse + '</p>';
            }
            
            formattedResponse = formattedResponse.replace(/(\d+\.\s)/g, '<br><strong>$1</strong>');
            formattedResponse = formattedResponse.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            
            return `<div class="ai-response">${formattedResponse}</div>`;
        }

        function findRelevantMarkets(query) {
    const queryLower = query.toLowerCase();
    const markets = polymarketData.markets || [];
    
    // Expanded categories for better matching
    const categories = {
        'premier_league': ['premier league', 'epl', 'english premier', 'manchester', 'liverpool', 'chelsea', 'arsenal', 'tottenham', 'city', 'united'],
        'football': ['football', 'soccer', 'fifa', 'world cup', 'uefa', 'champions league', 'euro'],
        'american_football': ['nfl', 'super bowl', 'american football', 'chiefs', 'cowboys', 'patriots', 'playoffs'],
        'basketball': ['nba', 'basketball', 'lakers', 'warriors', 'lebron', 'finals', 'playoffs'],
        'baseball': ['mlb', 'baseball', 'yankees', 'dodgers', 'world series'],
        'fed_rates': ['fed', 'federal reserve', 'interest rate', 'fomc', 'jerome powell', 'inflation'],
        'politics': ['election', 'president', 'biden', 'trump', 'congress', 'senate', 'republican', 'democrat'],
        'crypto': ['bitcoin', 'ethereum', 'crypto', 'btc', 'eth', 'binance', 'coinbase', 'defi'],
        'stocks': ['stock', 'nasdaq', 'dow', 'sp500', 's&p', 'apple', 'tesla', 'nvidia', 'market'],
        'entertainment': ['oscar', 'emmy', 'grammy', 'movie', 'netflix', 'disney', 'award'],
        'weather': ['weather', 'hurricane', 'storm', 'temperature', 'climate'],
        'general': ['will', 'happen', 'outcome', 'result', 'winner', 'prediction', 'forecast']
    };
    
    let searchScore = {};
    
    markets.forEach((market, index) => {
        const title = market.title.toLowerCase();
        const description = market.description.toLowerCase();
        let score = 0;
        
        // Direct word matches
        const queryWords = queryLower.split(' ').filter(word => word.length > 2);
        queryWords.forEach(word => {
            if (title.includes(word)) score += 15;
            if (description.includes(word)) score += 8;
        });
        
        // Category matches
        Object.entries(categories).forEach(([category, keywords]) => {
            keywords.forEach(keyword => {
                if (queryLower.includes(keyword)) {
                    if (title.includes(keyword) || description.includes(keyword)) {
                        score += 20;
                    }
                }
            });
        });
        
        // Volume bonuses (popular markets are more relevant)
        if (market.volume24h > 1000000) score += 5;
        if (market.volume24h > 5000000) score += 3;
        
        // Recent activity bonus
        if (market.liquidity > 100000) score += 2;
        
        if (score > 0) {
            searchScore[index] = score;
        }
    });
    
    let relevantMarkets = Object.entries(searchScore)
        .sort(([, a], [, b]) => b - a)
        .slice(0, 4) // Show max 4 markets to avoid clutter
        .map(([index]) => markets[parseInt(index)]);
    
    // Fallback: if no matches, show trending markets
    if (relevantMarkets.length === 0) {
        relevantMarkets = markets
            .filter(m => m.volume24h > 0)
            .sort((a, b) => (b.volume24h || 0) - (a.volume24h || 0))
            .slice(0, 3);
    }
    
    return relevantMarkets;
}

        function extractCategory(title, description) {
    const text = (title + ' ' + description).toLowerCase();
    if (text.includes('crypto') || text.includes('bitcoin') || text.includes('ethereum') || text.includes('btc') || text.includes('eth')) return 'crypto';
    if (text.includes('fed') || text.includes('interest rate') || text.includes('inflation') || text.includes('fomc')) return 'finance';
    if (text.includes('election') || text.includes('president') || text.includes('political') || text.includes('biden') || text.includes('trump')) return 'politics';
    if (text.includes('nfl') || text.includes('nba') || text.includes('sport') || text.includes('football') || text.includes('basketball')) return 'sports';
    return 'general';
}

async function findRelevantMarketsWithAI(userQuery) {
    const markets = polymarketData.markets || [];
    
    // Take a sample to avoid token limits
    const marketSample = markets.slice(0, 100);
    
    // Create condensed data for AI
    const marketSummaries = marketSample.map((market, index) => ({
        index: index,
        title: market.title,
        description: market.description.substring(0, 200), // Truncate long descriptions
        volume24h: market.volume24h,
        category: extractCategory(market.title, market.description)
    }));
    
    const aiContext = `
User Query: "${userQuery}"

Available Markets:
${JSON.stringify(marketSummaries, null, 2)}

Task: Find the 3-4 most relevant markets for this query. Return only a JSON array of indices like [2, 15, 23]. Consider semantic relevance and market activity.`;

    try {
        const response = await callOpenRouterAPI(aiContext);
        
        // Extract just the JSON array from the response
        const jsonMatch = response.match(/\[[\d,\s]+\]/);
        if (!jsonMatch) {
            console.log('AI response format issue, falling back to keyword search');
            return findRelevantMarkets(userQuery);
        }
        
        const relevantIndices = JSON.parse(jsonMatch[0]);
        const relevantMarkets = relevantIndices
            .map(index => marketSample[index])
            .filter(Boolean)
            .slice(0, 4);
        
        return relevantMarkets.length > 0 ? relevantMarkets : findRelevantMarkets(userQuery);
        
    } catch (error) {
        console.error('AI market search failed:', error);
        return findRelevantMarkets(userQuery);
    }
}

        function createAIContext(userMessage, relevantMarkets) {
            const marketData = relevantMarkets.map(market => ({
                title: market.title,
                description: market.description,
                outcomes: market.outcomes,
                volume24h: market.volume24h,
                volumeTotal: market.volumeTotal,
                liquidity: market.liquidity,
                favoredOutcome: market.favoredOutcome
            }));
            
            return `
User Question: "${userMessage}"

Relevant Betting Markets Data:
${JSON.stringify(marketData, null, 2)}

Instructions:
1. Analyze the provided betting markets data relevant to the user's question
2. Give your expert opinion on the most likely outcomes based on market data
3. Explain your reasoning using odds, volume, and market sentiment
4. Be conversational and engaging
5. Format your response with clear structure and paragraphs
6. Use bullet points or numbered lists where appropriate
7. Consider volume and liquidity as indicators of market confidence
8. Don't mention that you're looking at JSON data - analyze the markets naturally
9. Keep sections well-organized with clear headings when discussing multiple topics

Provide your analysis and predictions based on this market data.
`;
        }

        async function callOpenRouterAPI(context) {
    let apiKey;
    try {
        const keyResponse = await fetch('/api/get-api-key');
        const keyData = await keyResponse.json();
        apiKey = keyData.apiKey;
    } catch (error) {
        console.error('Failed to get API key:', error);
        throw new Error('API key not available');
    }

    // Check if this is a market search request
    const isMarketSearch = context.includes('Available Markets:');
    const systemMessage = isMarketSearch 
        ? 'You are a data analyst that finds relevant prediction markets. Return only the requested JSON array format.'
        : 'You are an expert betting analyst who provides intelligent insights on prediction markets. Analyze market data and give clear, well-formatted predictions with reasoning.';

    const response = await fetch(CONFIG.OPENROUTER_API_URL, {
        method: 'POST',
        headers: {
            'Authorization': `Bearer ${apiKey}`,
            'Content-Type': 'application/json',
            'HTTP-Referer': window.location.origin,
            'X-Title': 'Polymarket AI Advisor'
        },
        body: JSON.stringify({
            model: CONFIG.MODEL,
            messages: [
                {
                    role: 'system',
                    content: systemMessage
                },
                {
                    role: 'user',
                    content: context
                }
            ],
            max_tokens: isMarketSearch ? 100 : 1000,
            temperature: isMarketSearch ? 0.1 : 0.7
        })
    });
    
    if (!response.ok) {
        const errorText = await response.text();
        throw new Error(`OpenRouter API error: ${response.status} - ${errorText}`);
    }
    
    const data = await response.json();
    return data.choices[0].message.content;
}
        function addMessage(sender, content, relevantMarkets = null) {
    const messagesContainer = document.getElementById('chatMessages');
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${sender}`;
    
    const avatar = document.createElement('div');
    avatar.className = 'message-avatar';
    if (sender === "user") { 
        avatar.classList.add("avatar-user"); 
        avatar.textContent = "YOU"; 
    } else { 
        avatar.classList.add("avatar-bot"); 
        avatar.innerHTML = "<img src=\"https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68e3e486ad84ad7e7c12c57e_New%20Project%20(30).png\" alt=\"Molly\" />"; 
    }
    
    const contentDiv = document.createElement('div');
    contentDiv.className = 'message-content';
    contentDiv.innerHTML = content;
    
    messageDiv.appendChild(avatar);
    messageDiv.appendChild(contentDiv);
    messagesContainer.appendChild(messageDiv);
    
    // ALWAYS show markets for bot messages (this is the key change)
    if (sender === 'bot' && relevantMarkets && relevantMarkets.length > 0) {
        setTimeout(() => {
            const marketsSection = document.createElement('div');
            marketsSection.className = 'markets-section';
            marketsSection.innerHTML = `
                <div class="markets-header">
                    üìä Relevant Markets
                </div>
            `;
            
            relevantMarkets.forEach((market) => {
                const marketDiv = document.createElement('div');
                marketDiv.innerHTML = createMarketCard(market, 0);
                marketsSection.appendChild(marketDiv);
            });
            
            contentDiv.appendChild(marketsSection);
            
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }, 500); // Small delay for better UX
    }
    
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
    chatHistory.push({ sender, content });
}

        function createMarketCard(market, index) {
    const formatVolume = (vol) => {
        if (!vol || vol === 0) return '$0';
        if (vol > 1000000) return `${(vol / 1000000).toFixed(1)}M`;
        if (vol > 1000) return `${(vol / 1000).toFixed(1)}K`;
        return `${vol.toFixed(0)}`;
    };
    
    const formatPrice = (price) => `${(price * 100).toFixed(1)}%`;
    
    const outcome1 = market.outcomes[0];
    const outcome2 = market.outcomes[1];
    
    const outcome1Class = outcome1.price > 0.6 ? 'favored' : outcome1.price < 0.4 ? 'underdog' : 'neutral';
    const outcome2Class = outcome2.price > 0.6 ? 'favored' : outcome2.price < 0.4 ? 'underdog' : 'neutral';
    
    return `
        <div class="market-card">
            <div class="market-header">
                <div class="market-title">${market.title}</div>
                ${market.image ? `<img src="${market.image}" alt="Market" class="market-image" onerror="this.style.display='none'">` : ''}
            </div>
            <div class="market-outcomes">
                <div class="outcome ${outcome1Class}">
                    ${outcome1.name}: ${formatPrice(outcome1.price)}
                </div>
                <div class="outcome ${outcome2Class}">
                    ${outcome2.name}: ${formatPrice(outcome2.price)}
                </div>
            </div>
            <div class="market-stats">
                <div class="stat-item">
                    <span class="stat-label">24h Volume</span>
                    <span class="stat-value">${formatVolume(market.volume24h)}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Total Volume</span>
                    <span class="stat-value">${formatVolume(market.volumeTotal)}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Liquidity</span>
                    <span class="stat-value">${formatVolume(market.liquidity)}</span>
                </div>
            </div>
        </div>
    `;
}

        function showTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            const messagesContainer = document.getElementById('chatMessages');
            indicator.style.display = 'flex';
            messagesContainer.appendChild(indicator);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            indicator.style.display = 'none';
        }

        window.addEventListener('error', function(e) {
            console.error('Global error:', e.error);
        });

        window.addEventListener('unhandledrejection', function(e) {
            console.error('Unhandled promise rejection:', e.reason);
        });
    </script>
    <!-- 3D Character Panel -->
<div class="threeD-panel" id="threeDPanel">
    <div class="threeD-body">
        <img src="https://github.com/sovagpt/fa/raw/main/polymarketg.gif" alt="3D Character" class="character-gif" />
    </div>
</div>
</body>
</html>









































